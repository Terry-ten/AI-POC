# Web Vulnerability to POC Generator

åŸºäºå¤§æ¨¡å‹APIçš„Webæ¼æ´ä¿¡æ¯åˆ°POCä»£ç ç”Ÿæˆç³»ç»Ÿ

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://www.python.org)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.110+-green.svg)](https://fastapi.tiangolo.com)
[![License](https://img.shields.io/badge/License-Educational-red.svg)](LICENSE)

## âš ï¸ é‡è¦å£°æ˜

**æœ¬å·¥å…·ä»…ç”¨äºæˆæƒçš„å®‰å…¨æµ‹è¯•å’Œç ”ç©¶ç›®çš„**

- âœ… ä»…åœ¨è·å¾—æ˜ç¡®æˆæƒçš„ç³»ç»Ÿä¸Šä½¿ç”¨
- âŒ æœªç»æˆæƒçš„æµ‹è¯•å¯èƒ½è¿åæ³•å¾‹
- ğŸ“‹ ä½¿ç”¨è€…éœ€å¯¹å…¶è¡Œä¸ºè´Ÿè´£
- ğŸ“ å»ºè®®ç”¨äºå®‰å…¨æ•™è‚²å’ŒCTFç«èµ›

---

## ç›®å½•

- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [é¡¹ç›®æ¶æ„](#é¡¹ç›®æ¶æ„)
- [å®ç°æ–¹æ³•](#å®ç°æ–¹æ³•)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [APIæ–‡æ¡£](#apiæ–‡æ¡£)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [æ”¯æŒçš„æ¼æ´ç±»å‹](#æ”¯æŒçš„æ¼æ´ç±»å‹)
- [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ¤– **æ™ºèƒ½POCç”Ÿæˆ** - åŸºäºå¤§æ¨¡å‹APIè‡ªåŠ¨åˆ†ææ¼æ´å¹¶ç”ŸæˆéªŒè¯ä»£ç 
- ğŸ” **æ¼æ´ç±»å‹è¯†åˆ«** - è‡ªåŠ¨è¯†åˆ«SQLæ³¨å…¥ã€XSSã€CSRFã€æ–‡ä»¶ä¸Šä¼ ç­‰Webæ¼æ´
- ğŸ“¦ **å¤šæ ¼å¼è¾“å…¥** - æ”¯æŒæ–‡å­—æè¿°ã€CVEç¼–å·ã€HTTPæ•°æ®åŒ…ç­‰å¤šç§è¾“å…¥
- ğŸ“ **å®Œæ•´è¾“å‡º** - è¿”å›POCä»£ç ã€ä½¿ç”¨è¯´æ˜ã€é£é™©æç¤ºå’ŒåŸå§‹æ¼æ´ä¿¡æ¯
- ğŸ“š **POCåº“ç®¡ç†** - è‡ªåŠ¨ä¿å­˜æ‰€æœ‰ç”Ÿæˆçš„POCï¼Œæ”¯æŒæœç´¢ã€ç®¡ç†å’Œå¤ç”¨
- âš¡ **å¤šå¼•æ“æ”¯æŒ** - æ”¯æŒPythonå’ŒNucleiä¸¤ç§POCæ‰§è¡Œå¼•æ“

### æŠ€æœ¯ç‰¹æ€§
- âš¡ **é«˜æ€§èƒ½å¼‚æ­¥** - åŸºäºFastAPIå¼‚æ­¥æ¡†æ¶ï¼Œæ”¯æŒé«˜å¹¶å‘
- ğŸŒ **CORSæ”¯æŒ** - å†…ç½®è·¨åŸŸæ”¯æŒï¼Œä¾¿äºå‰ç«¯é›†æˆ
- ğŸ“š **è‡ªåŠ¨æ–‡æ¡£** - Swagger UI + ReDocåŒæ–‡æ¡£ç³»ç»Ÿ
- ğŸ”§ **çµæ´»é…ç½®** - æ”¯æŒå¤šç§å¤§æ¨¡å‹APIï¼ˆOpenAIå…¼å®¹æ¥å£ï¼‰
- ğŸ“Š **è¯¦ç»†æ—¥å¿—** - å®Œæ•´çš„è¯·æ±‚æ—¥å¿—å’Œé”™è¯¯è¿½è¸ª
- ğŸ’¾ **SQLiteå­˜å‚¨** - è½»é‡çº§POCåº“ç®¡ç†ï¼Œæ— éœ€å¤–éƒ¨æ•°æ®åº“

---

## é¡¹ç›®æ¶æ„

### ç›®å½•ç»“æ„

```
yanwutang_test1/
â”œâ”€â”€ main.py                 # FastAPIåº”ç”¨å…¥å£ï¼ŒæœåŠ¡å™¨å¯åŠ¨
â”œâ”€â”€ config.py               # å…¨å±€é…ç½®ï¼ˆAPIã€å¤§æ¨¡å‹è®¾ç½®ï¼‰
â”œâ”€â”€ requirements.txt        # Pythonä¾èµ–åŒ…åˆ—è¡¨
â”œâ”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ api_server.log         # è¿è¡Œæ—¥å¿—æ–‡ä»¶
â”‚
â”œâ”€â”€ api/                   # APIå±‚ - è·¯ç”±å’Œç«¯ç‚¹å®šä¹‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ routes.py          # APIè·¯ç”±ï¼ˆ/generate-poc, /healthï¼‰
â”‚
â”œâ”€â”€ models/                # æ•°æ®å±‚ - Pydanticæ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ schemas.py         # è¯·æ±‚/å“åº”æ•°æ®æ¨¡å‹
â”‚
â”œâ”€â”€ services/              # ä¸šåŠ¡å±‚ - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ llm_service.py     # å¤§æ¨¡å‹APIè°ƒç”¨æœåŠ¡
â”‚
â””â”€â”€ frontend/              # å‰ç«¯å±‚ - Webç”¨æˆ·ç•Œé¢
    â”œâ”€â”€ index.html         # ä¸»é¡µé¢ï¼ˆå•é¡µåº”ç”¨ï¼‰
    â”œâ”€â”€ css/
    â”‚   â””â”€â”€ style.css      # å®Œæ•´æ ·å¼è¡¨ï¼ˆ970è¡Œï¼‰
    â””â”€â”€ js/
        â””â”€â”€ app.js         # äº¤äº’é€»è¾‘ï¼ˆ480è¡Œï¼‰
```

### æŠ€æœ¯æ ˆ

#### åç«¯æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯é€‰å‹ | è¯´æ˜ |
|------|---------|------|
| Webæ¡†æ¶ | FastAPI | é«˜æ€§èƒ½å¼‚æ­¥æ¡†æ¶ |
| HTTPæœåŠ¡å™¨ | Uvicorn | ASGIæœåŠ¡å™¨ |
| æ•°æ®éªŒè¯ | Pydantic | æ•°æ®æ¨¡å‹å’ŒéªŒè¯ |
| LLMé›†æˆ | OpenAI SDK | æ”¯æŒOpenAIå…¼å®¹API |
| æ—¥å¿—è®°å½• | Logging | Pythonæ ‡å‡†æ—¥å¿—åº“ |
| é™æ€æ–‡ä»¶ | StaticFiles | FastAPIé™æ€æ–‡ä»¶æœåŠ¡ |

#### å‰ç«¯æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯é€‰å‹ | è¯´æ˜ |
|------|---------|------|
| é¡µé¢ç»“æ„ | HTML5 | è¯­ä¹‰åŒ–æ ‡ç­¾ã€ç°ä»£Webæ ‡å‡† |
| æ ·å¼è®¾è®¡ | CSS3 | CSSå˜é‡ã€Gridã€Flexboxã€åŠ¨ç”» |
| äº¤äº’é€»è¾‘ | Vanilla JavaScript | åŸç”ŸES6+ï¼Œæ— æ¡†æ¶ä¾èµ– |
| HTTPè¯·æ±‚ | Fetch API | ç°ä»£å¼‚æ­¥è¯·æ±‚æ¥å£ |
| å›¾æ ‡åº“ | Font Awesome 6.4 | çŸ¢é‡å›¾æ ‡ï¼ˆCDNï¼‰ |
| è®¾è®¡é£æ ¼ | æš—è‰²ä¸»é¢˜ | ç°ä»£åŒ–æ·±è‰²UIè®¾è®¡ |

---

## å®ç°æ–¹æ³•

### åç«¯å®ç°

åç«¯é‡‡ç”¨FastAPIæ¡†æ¶æ„å»ºRESTful APIï¼Œä¸»è¦å®ç°æ­¥éª¤ï¼š

1. **é¡¹ç›®æ¶æ„è®¾è®¡**ï¼šé‡‡ç”¨åˆ†å±‚æ¶æ„ï¼Œå°†APIè·¯ç”±ã€æ•°æ®æ¨¡å‹ã€ä¸šåŠ¡é€»è¾‘åˆ†ç¦»
2. **APIç«¯ç‚¹å¼€å‘**ï¼šå®ç°POCç”Ÿæˆæ¥å£(`/api/generate-poc`)å’Œå¥åº·æ£€æŸ¥æ¥å£(`/api/health`)
3. **å¤§æ¨¡å‹é›†æˆ**ï¼šé€šè¿‡OpenAI SDKè°ƒç”¨å…¼å®¹çš„å¤§æ¨¡å‹APIï¼Œä½¿ç”¨ç²¾å¿ƒè®¾è®¡çš„æç¤ºè¯å¼•å¯¼æ¨¡å‹ç”Ÿæˆå®‰å…¨çš„POCä»£ç 
4. **è¯·æ±‚å¤„ç†æµç¨‹**ï¼š
   - æ¥æ”¶ç”¨æˆ·è¾“å…¥çš„æ¼æ´ä¿¡æ¯å’Œç›®æ ‡ä¿¡æ¯
   - æ„é€ ç»“æ„åŒ–çš„æç¤ºè¯å‘é€ç»™å¤§æ¨¡å‹
   - è§£æå¤§æ¨¡å‹è¿”å›çš„JSONå“åº”
   - æå–POCä»£ç ã€æ¼æ´ç±»å‹ã€ä½¿ç”¨è¯´æ˜ç­‰ä¿¡æ¯
   - è¿”å›æ ¼å¼åŒ–çš„å“åº”ç»™å‰ç«¯

### å‰ç«¯å®ç°

å‰ç«¯é‡‡ç”¨çº¯åŸç”ŸæŠ€æœ¯æ ˆï¼Œæ— æ¡†æ¶ä¾èµ–ï¼Œå®ç°æ­¥éª¤ï¼š

1. **é¡µé¢ç»“æ„ï¼ˆHTML5ï¼‰**ï¼š
   - ä½¿ç”¨è¯­ä¹‰åŒ–æ ‡ç­¾æ„å»ºæ¸…æ™°çš„æ–‡æ¡£ç»“æ„
   - åˆ†ä¸ºå¯¼èˆªæ ã€è­¦å‘Šæ¨ªå¹…ã€HeroåŒºåŸŸã€ç”Ÿæˆå™¨ä¸»ä½“ã€åŠŸèƒ½ç‰¹æ€§ã€é¡µè„šç­‰æ¨¡å—
   - è¾“å…¥è¾“å‡ºåˆ†æ å¸ƒå±€ï¼Œå·¦ä¾§è¾“å…¥æ¼æ´ä¿¡æ¯ï¼Œå³ä¾§æ˜¾ç¤ºç”Ÿæˆç»“æœ

2. **æ ·å¼è®¾è®¡ï¼ˆCSS3ï¼‰**ï¼š
   - é‡‡ç”¨CSSè‡ªå®šä¹‰å±æ€§ï¼ˆCSS Variablesï¼‰å®ç°ä¸»é¢˜åŒ–
   - æš—è‰²ä¸»é¢˜è®¾è®¡ï¼Œä½¿ç”¨æ¸å˜è‰²å’Œå‘å…‰æ•ˆæœ
   - Gridå’ŒFlexboxå¸ƒå±€å®ç°å“åº”å¼è®¾è®¡
   - CSSåŠ¨ç”»å®ç°åŠ è½½çŠ¶æ€ã€èƒŒæ™¯ç²’å­æ•ˆæœã€æŒ‰é’®äº¤äº’ç­‰
   - å®Œå…¨è‡ªé€‚åº”ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯

3. **äº¤äº’é€»è¾‘ï¼ˆJavaScriptï¼‰**ï¼š
   - ä½¿ç”¨Fetch APIè°ƒç”¨åç«¯RESTfulæ¥å£
   - å®ç°çŠ¶æ€ç®¡ç†ï¼šç©ºçŠ¶æ€ã€åŠ è½½çŠ¶æ€ã€ç»“æœå±•ç¤ºçŠ¶æ€
   - å¿«é€Ÿç¤ºä¾‹æŒ‰é’®ï¼šé¢„è®¾SQLæ³¨å…¥ã€XSSã€æ–‡ä»¶ä¸Šä¼ ã€SSRFç­‰ç¤ºä¾‹
   - ä»£ç æ“ä½œï¼šå¤åˆ¶åˆ°å‰ªè´´æ¿ã€ä¸‹è½½ä¸º.pyæ–‡ä»¶
   - Toasté€šçŸ¥ç³»ç»Ÿæä¾›æ“ä½œåé¦ˆ
   - å¹³æ»‘æ»šåŠ¨å’Œå¯¼èˆªæ æ¿€æ´»çŠ¶æ€è·Ÿè¸ª

4. **å‰åç«¯é›†æˆ**ï¼š
   - FastAPIé€šè¿‡`StaticFiles`ä¸­é—´ä»¶æŒ‚è½½å‰ç«¯é™æ€èµ„æº
   - `/`æ ¹è·¯å¾„è¿”å›`index.html`
   - `/css`, `/js`, `/assets`åˆ†åˆ«æŒ‚è½½å¯¹åº”çš„é™æ€æ–‡ä»¶ç›®å½•
   - CORSä¸­é—´ä»¶é…ç½®å…è®¸è·¨åŸŸè®¿é—®

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- pip åŒ…ç®¡ç†å™¨
- æœ‰æ•ˆçš„å¤§æ¨¡å‹APIå¯†é’¥ï¼ˆOpenAIæˆ–å…¼å®¹æœåŠ¡ï¼‰

### 1. å…‹éš†é¡¹ç›®ï¼ˆå¦‚é€‚ç”¨ï¼‰

```bash
cd yanwutang_test1
```

### 2. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

**ä¾èµ–åŒ…è¯´æ˜ï¼š**
- `fastapi>=0.110.0` - Webæ¡†æ¶
- `uvicorn[standard]>=0.27.0` - ASGIæœåŠ¡å™¨
- `pydantic>=2.6.0` - æ•°æ®éªŒè¯
- `openai>=1.0.0` - OpenAI SDK
- `python-dotenv>=1.0.0` - ç¯å¢ƒå˜é‡ç®¡ç†

### 3. é…ç½®APIå¯†é’¥

#### æ–¹æ³•1ï¼šä¿®æ”¹ config.pyï¼ˆé€‚ç”¨äºå¼€å‘ç¯å¢ƒï¼‰

ç¼–è¾‘ `config.py` æ–‡ä»¶ï¼Œä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š

```python
LLM_API_KEY: str = "your-api-key-here"
LLM_API_BASE: str = "https://api.siliconflow.cn/v1"  # æˆ–å…¶ä»–å…¼å®¹æœåŠ¡
LLM_MODEL: str = "moonshotai/Kimi-K2-Instruct-0905"  # æˆ–å…¶ä»–æ¨¡å‹
```

#### æ–¹æ³•2ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡ï¼ˆæ¨èç”¨äºç”Ÿäº§ç¯å¢ƒï¼‰

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
LLM_API_KEY=your-api-key-here
LLM_API_BASE=https://api.openai.com/v1
LLM_MODEL=gpt-4
```

### 4. å¯åŠ¨æœåŠ¡

```bash
python main.py
```

**å¯åŠ¨æˆåŠŸåï¼Œæ‚¨å°†çœ‹åˆ°ï¼š**

```
âš ï¸  è­¦å‘Šï¼šæœ¬å·¥å…·ä»…ç”¨äºæˆæƒçš„å®‰å…¨æµ‹è¯•å’Œç ”ç©¶ç›®çš„
    - ä»…åœ¨è·å¾—æ˜ç¡®æˆæƒçš„ç³»ç»Ÿä¸Šä½¿ç”¨
    - æœªç»æˆæƒçš„æµ‹è¯•å¯èƒ½è¿åæ³•å¾‹
    - ä½¿ç”¨è€…éœ€å¯¹å…¶è¡Œä¸ºè´Ÿè´£

ğŸš€ å¯åŠ¨æœåŠ¡å™¨: http://127.0.0.1:8000
ğŸ“š APIæ–‡æ¡£: http://127.0.0.1:8000/docs
```

### 5. è®¿é—®Webç•Œé¢

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š

- **Webç•Œé¢ï¼ˆæ¨èï¼‰**: http://127.0.0.1:8000/
- **Swagger UI**: http://127.0.0.1:8000/docs
- **ReDoc**: http://127.0.0.1:8000/redoc

### 6. ä½¿ç”¨Webç•Œé¢ç”ŸæˆPOC

#### æ–¹å¼ä¸€ï¼šç›´æ¥è¾“å…¥æ¼æ´ä¿¡æ¯

1. åœ¨"æ¼æ´ä¿¡æ¯è¾“å…¥"æ–‡æœ¬æ¡†ä¸­è¾“å…¥æ¼æ´æè¿°ï¼Œæ”¯æŒï¼š
   - **æ¼æ´æè¿°**ï¼šä¾‹å¦‚"ç›®æ ‡ç½‘ç«™ http://example.com/login å­˜åœ¨SQLæ³¨å…¥æ¼æ´ï¼Œä½äºusernameå‚æ•°"
   - **CVEç¼–å·**ï¼šä¾‹å¦‚"CVE-2017-5638: Apache Struts2è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´"
   - **HTTPæ•°æ®åŒ…**ï¼šå®Œæ•´çš„è¯·æ±‚åŒ…å’Œå“åº”ä¿¡æ¯

2. ï¼ˆå¯é€‰ï¼‰åœ¨"ç›®æ ‡ä¿¡æ¯"è¾“å…¥æ¡†å¡«å†™ç›®æ ‡ç³»ç»Ÿä¿¡æ¯ï¼šä¾‹å¦‚"MySQL 5.7 - PHP 7.4"

3. ç‚¹å‡»"ç”ŸæˆPOCä»£ç "æŒ‰é’®ï¼Œç­‰å¾…AIåˆ†æ

4. æŸ¥çœ‹ç”Ÿæˆç»“æœï¼š
   - **æ¼æ´ç±»å‹æ ‡ç­¾**ï¼šè‡ªåŠ¨è¯†åˆ«çš„æ¼æ´ç±»å‹
   - **POCéªŒè¯ä»£ç **ï¼šå®Œæ•´çš„PythonéªŒè¯ä»£ç 
   - **ä½¿ç”¨è¯´æ˜**ï¼šä»£ç è¯´æ˜å’Œä½¿ç”¨æ–¹æ³•

5. ä»£ç æ“ä½œï¼š
   - **å¤åˆ¶ä»£ç **ï¼šç‚¹å‡»"å¤åˆ¶"æŒ‰é’®å°†ä»£ç å¤åˆ¶åˆ°å‰ªè´´æ¿
   - **ä¸‹è½½POC**ï¼šç‚¹å‡»"ä¸‹è½½POC"æŒ‰é’®ä¿å­˜ä¸º.pyæ–‡ä»¶
   - **æ–°å»ºPOC**ï¼šç‚¹å‡»"æ–°å»ºPOC"æ¸…ç©ºè¡¨å•å¼€å§‹æ–°çš„ç”Ÿæˆ

#### æ–¹å¼äºŒï¼šä½¿ç”¨å¿«é€Ÿç¤ºä¾‹

Webç•Œé¢æä¾›äº†4ä¸ªé¢„è®¾ç¤ºä¾‹ï¼Œç‚¹å‡»å³å¯å¿«é€ŸåŠ è½½ï¼š

- **SQLæ³¨å…¥**ï¼šMySQLæ—¶é—´ç›²æ³¨ç¤ºä¾‹
- **XSSè·¨ç«™**ï¼šåå°„å‹XSSç¤ºä¾‹
- **æ–‡ä»¶ä¸Šä¼ **ï¼šPHPåé—¨ä¸Šä¼ ç¤ºä¾‹
- **SSRF**ï¼šæœåŠ¡ç«¯è¯·æ±‚ä¼ªé€ ç¤ºä¾‹

#### Webç•Œé¢ç‰¹æ€§

- âœ… **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯è®¿é—®
- âœ… **æš—è‰²ä¸»é¢˜**ï¼šæŠ¤çœ¼çš„ç°ä»£åŒ–æ·±è‰²UI
- âœ… **å®æ—¶åé¦ˆ**ï¼šToasté€šçŸ¥æç¤ºæ“ä½œç»“æœ
- âœ… **åŠ è½½åŠ¨ç”»**ï¼šåˆ†æ­¥éª¤æ˜¾ç¤ºAIå¤„ç†è¿›åº¦
- âœ… **ä»£ç é«˜äº®**ï¼šä¸“ä¸šçš„ä»£ç æ˜¾ç¤ºæ ¼å¼
- âœ… **å¿«æ·é”®æ”¯æŒ**ï¼šCtrl+Enteræäº¤è¡¨å•

---

## APIæ–‡æ¡£

### 1. ç”ŸæˆPOCä»£ç 

**ç«¯ç‚¹**: `POST /api/generate-poc`

**åŠŸèƒ½**: æ ¹æ®æ¼æ´ä¿¡æ¯ç”ŸæˆPOCéªŒè¯ä»£ç 

#### è¯·æ±‚å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `vulnerability_info` | string | âœ… | æ¼æ´ä¿¡æ¯ï¼ˆæè¿°/CVE/æ•°æ®åŒ…ï¼‰ |
| `target_info` | string | âŒ | ç›®æ ‡ç³»ç»Ÿä¿¡æ¯ |

#### è¯·æ±‚ç¤ºä¾‹1 - æ¼æ´æè¿°

```json
{
  "vulnerability_info": "ç›®æ ‡ç½‘ç«™ http://example.com/login å­˜åœ¨SQLæ³¨å…¥æ¼æ´ï¼Œä½äºç™»å½•é¡µé¢çš„usernameå‚æ•°ï¼Œä½¿ç”¨å•å¼•å·å¯ä»¥è§¦å‘æ•°æ®åº“é”™è¯¯",
  "target_info": "Webåº”ç”¨ - MySQLæ•°æ®åº“ - PHPåç«¯"
}
```

#### è¯·æ±‚ç¤ºä¾‹2 - HTTPæ•°æ®åŒ…

```json
{
  "vulnerability_info": "POST /login HTTP/1.1\nHost: example.com\nContent-Type: application/x-www-form-urlencoded\n\nusername=admin'&password=123456\n\nå“åº”ï¼šYou have an error in your SQL syntax",
  "target_info": "MySQL 5.7"
}
```

#### è¯·æ±‚ç¤ºä¾‹3 - CVEä¿¡æ¯

```json
{
  "vulnerability_info": "CVE-2017-5638: Apache Struts2è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼Œç‰ˆæœ¬2.3.5-2.3.31ï¼Œå¯é€šè¿‡Content-Typeå¤´æ³¨å…¥OGNLè¡¨è¾¾å¼",
  "target_info": "Apache Struts 2.3.28"
}
```

#### å“åº”å‚æ•°

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `success` | boolean | æ˜¯å¦æˆåŠŸç”Ÿæˆ |
| `vulnerability_type` | string | è¯†åˆ«çš„æ¼æ´ç±»å‹ |
| `original_vulnerability_info` | string | åŸå§‹æ¼æ´ä¿¡æ¯ |
| `poc_code` | string | ç”Ÿæˆçš„Python POCä»£ç  |
| `explanation` | string | ä»£ç è¯´æ˜å’Œä½¿ç”¨æ–¹æ³• |
| `error` | string | é”™è¯¯ä¿¡æ¯ï¼ˆå¤±è´¥æ—¶ï¼‰ |
| `warning` | string | å®‰å…¨è­¦å‘Š |

#### å“åº”ç¤ºä¾‹

```json
{
  "success": true,
  "vulnerability_type": "SQLæ³¨å…¥",
  "original_vulnerability_info": "ç›®æ ‡ç½‘ç«™ http://example.com/login å­˜åœ¨SQLæ³¨å…¥æ¼æ´...",
  "poc_code": "import requests\nimport time\n\n# POCéªŒè¯ä»£ç  - SQLæ³¨å…¥ï¼ˆæ—¶é—´ç›²æ³¨ï¼‰\nurl = 'http://example.com/login'\n\n# å®‰å…¨çš„éªŒè¯payload\npayload = \"admin' AND SLEEP(3)--\"\ndata = {'username': payload, 'password': '123456'}\n\nstart_time = time.time()\nresponse = requests.post(url, data=data)\nend_time = time.time()\n\nif (end_time - start_time) >= 3:\n    print('[+] æ¼æ´å­˜åœ¨ï¼šæ£€æµ‹åˆ°SQLæ³¨å…¥æ¼æ´')\nelse:\n    print('[-] æ¼æ´ä¸å­˜åœ¨')",
  "explanation": "è¯¥POCç”¨äºéªŒè¯SQLæ³¨å…¥æ¼æ´...",
  "error": null,
  "warning": "âš ï¸ è­¦å‘Šï¼šæœ¬å·¥å…·ä»…ç”¨äºæˆæƒçš„å®‰å…¨æµ‹è¯•å’Œç ”ç©¶ç›®çš„"
}
```

### 2. å¥åº·æ£€æŸ¥

**ç«¯ç‚¹**: `GET /api/health`

**åŠŸèƒ½**: æ£€æŸ¥æœåŠ¡çŠ¶æ€

#### å“åº”ç¤ºä¾‹

```json
{
  "status": "healthy",
  "service": "Vulnerability to POC Generator",
  "version": "1.0.0"
}
```

### 3. POCåº“ç®¡ç†API

#### 3.1 æœç´¢POC

**ç«¯ç‚¹**: `GET /api/pocs/search`

**å‚æ•°**:
- `vuln_type`: æ¼æ´ç±»å‹è¿‡æ»¤ï¼ˆå¦‚: sqli, xss, rceï¼‰
- `poc_type`: POCç±»å‹è¿‡æ»¤ï¼ˆpython/nucleiï¼‰
- `keyword`: å…³é”®è¯æœç´¢
- `limit`: è¿”å›æ•°é‡é™åˆ¶ï¼ˆé»˜è®¤50ï¼‰
- `offset`: åç§»é‡ï¼ˆé»˜è®¤0ï¼‰

```bash
curl "http://127.0.0.1:8000/api/pocs/search?vuln_type=sqli&limit=10"
```

#### 3.2 è·å–POCè¯¦æƒ…

**ç«¯ç‚¹**: `GET /api/pocs/{poc_id}`

```bash
curl "http://127.0.0.1:8000/api/pocs/1"
```

#### 3.3 æ‰§è¡ŒæŒ‡å®šPOC

**ç«¯ç‚¹**: `POST /api/pocs/{poc_id}/execute`

```bash
curl -X POST "http://127.0.0.1:8000/api/pocs/1/execute" \
  -H "Content-Type: application/json" \
  -d '{"target_url": "http://test.com"}'
```

#### 3.4 åˆ é™¤POC

**ç«¯ç‚¹**: `DELETE /api/pocs/{poc_id}`

```bash
curl -X DELETE "http://127.0.0.1:8000/api/pocs/1"
```

#### 3.5 è·å–ç»Ÿè®¡ä¿¡æ¯

**ç«¯ç‚¹**: `GET /api/pocs/statistics`

```bash
curl "http://127.0.0.1:8000/api/pocs/statistics"
```

#### 3.6 è·å–æ¼æ´ç±»å‹

**ç«¯ç‚¹**: `GET /api/pocs/vuln-types`

```bash
curl "http://127.0.0.1:8000/api/pocs/vuln-types"
```

---

## é…ç½®è¯´æ˜

### config.py é…ç½®é¡¹

åœ¨ `config.py` ä¸­å¯ä»¥è°ƒæ•´ä»¥ä¸‹å‚æ•°ï¼š

#### APIæœåŠ¡é…ç½®

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `API_HOST` | `127.0.0.1` | æœåŠ¡ç›‘å¬åœ°å€ |
| `API_PORT` | `8000` | æœåŠ¡ç«¯å£ |

#### å¤§æ¨¡å‹é…ç½®

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `LLM_API_KEY` | ç¯å¢ƒå˜é‡æˆ–é»˜è®¤å€¼ | APIå¯†é’¥ |
| `LLM_API_BASE` | `https://api.siliconflow.cn/v1` | APIåŸºç¡€URL |
| `LLM_MODEL` | `moonshotai/Kimi-K2-Instruct-0905` | ä½¿ç”¨çš„æ¨¡å‹ |
| `LLM_TEMPERATURE` | `0.7` | ç”Ÿæˆéšæœºæ€§ï¼ˆ0-1ï¼‰ |
| `LLM_MAX_TOKENS` | `2000` | æœ€å¤§ç”Ÿæˆé•¿åº¦ |

### æ”¯æŒçš„å¤§æ¨¡å‹æœåŠ¡

æœ¬ç³»ç»Ÿæ”¯æŒæ‰€æœ‰å…¼å®¹OpenAI APIæ ¼å¼çš„æœåŠ¡ï¼š

#### å›½é™…æœåŠ¡
- **OpenAI**: GPT-4, GPT-3.5-turbo
- **Anthropic**: Claudeï¼ˆéœ€ä½¿ç”¨å…¼å®¹å±‚ï¼‰
- **Google**: Geminiï¼ˆéœ€ä½¿ç”¨å…¼å®¹å±‚ï¼‰

#### å›½å†…æœåŠ¡
- **ç¡…åŸºæµåŠ¨**: Kimi, Qwen, DeepSeekç­‰
- **é€šä¹‰åƒé—®**: qwen-turbo, qwen-plus
- **ç™¾åº¦æ–‡å¿ƒ**: ERNIEç³»åˆ—
- **æ™ºè°±AI**: GLMç³»åˆ—

#### æœ¬åœ°éƒ¨ç½²
- **Ollama**: æœ¬åœ°è¿è¡Œå¼€æºæ¨¡å‹
- **LM Studio**: æœ¬åœ°æ¨¡å‹æœåŠ¡
- **vLLM**: é«˜æ€§èƒ½æ¨ç†æœåŠ¡

---

## æ”¯æŒçš„æ¼æ´ç±»å‹

### æ³¨å…¥ç±»æ¼æ´
- âœ… **SQLæ³¨å…¥** - æ•°æ®åº“æŸ¥è¯¢æ³¨å…¥ï¼ˆUnionæ³¨å…¥ã€ç›²æ³¨ã€æŠ¥é”™æ³¨å…¥ï¼‰
- âœ… **å‘½ä»¤æ³¨å…¥** - ç³»ç»Ÿå‘½ä»¤æ‰§è¡Œï¼ˆOS Command Injectionï¼‰
- âœ… **LDAPæ³¨å…¥** - LDAPæŸ¥è¯¢æ³¨å…¥
- âœ… **XPathæ³¨å…¥** - XMLè·¯å¾„è¯­è¨€æ³¨å…¥
- âœ… **æ¨¡æ¿æ³¨å…¥** (SSTI) - æœåŠ¡ç«¯æ¨¡æ¿æ³¨å…¥
- âœ… **NoSQLæ³¨å…¥** - MongoDBç­‰NoSQLæ•°æ®åº“æ³¨å…¥

### è·¨ç«™ç±»æ¼æ´
- âœ… **XSS** - è·¨ç«™è„šæœ¬æ”»å‡»
  - åå°„å‹XSS
  - å­˜å‚¨å‹XSS
  - DOMå‹XSS
- âœ… **CSRF** - è·¨ç«™è¯·æ±‚ä¼ªé€ 

### æ–‡ä»¶ç±»æ¼æ´
- âœ… **æ–‡ä»¶ä¸Šä¼ ** - ä»»æ„æ–‡ä»¶ä¸Šä¼ æ¼æ´
- âœ… **æ–‡ä»¶åŒ…å«** - æœ¬åœ°/è¿œç¨‹æ–‡ä»¶åŒ…å«ï¼ˆLFI/RFIï¼‰
- âœ… **è·¯å¾„éå†** - ç›®å½•ç©¿è¶Šï¼ˆPath Traversalï¼‰
- âœ… **æ–‡ä»¶ä¸‹è½½** - ä»»æ„æ–‡ä»¶è¯»å–

### é€»è¾‘ç±»æ¼æ´
- âœ… **è¶Šæƒè®¿é—®** - æ°´å¹³/å‚ç›´è¶Šæƒï¼ˆIDORï¼‰
- âœ… **ä¸šåŠ¡é€»è¾‘æ¼æ´** - æ”¯ä»˜ç»•è¿‡ã€ä¼˜æƒ åˆ¸æ»¥ç”¨ç­‰
- âœ… **è®¤è¯ç»•è¿‡** - ç™»å½•è®¤è¯ç¼ºé™·
- âœ… **ä¼šè¯ç®¡ç†** - Sessionå›ºå®šã€åŠ«æŒ

### å…¶ä»–Webæ¼æ´
- âœ… **SSRF** - æœåŠ¡ç«¯è¯·æ±‚ä¼ªé€ 
- âœ… **XXE** - XMLå¤–éƒ¨å®ä½“æ³¨å…¥
- âœ… **ååºåˆ—åŒ–** - ä¸å®‰å…¨çš„ååºåˆ—åŒ–
- âœ… **JWTæ¼æ´** - Tokenä¼ªé€ /ç¯¡æ”¹
- âœ… **APIæ¼æ´** - REST/GraphQL APIå®‰å…¨é—®é¢˜
- âœ… **CORSé”™è¯¯é…ç½®** - è·¨åŸŸèµ„æºå…±äº«æ¼æ´

---

## ä½¿ç”¨ç¤ºä¾‹

### Pythonè°ƒç”¨ç¤ºä¾‹

```python
import requests
import json

# APIç«¯ç‚¹
url = "http://127.0.0.1:8000/api/generate-poc"

# æ„å»ºè¯·æ±‚æ•°æ®
payload = {
    "vulnerability_info": "ç›®æ ‡ç½‘ç«™å­˜åœ¨SQLæ³¨å…¥æ¼æ´ï¼Œä½äºç™»å½•é¡µé¢çš„usernameå‚æ•°",
    "target_info": "MySQL 5.7 - PHP 7.4"
}

# å‘é€POSTè¯·æ±‚
response = requests.post(url, json=payload)
result = response.json()

# å¤„ç†å“åº”
if result["success"]:
    print("=" * 60)
    print(f"æ¼æ´ç±»å‹: {result['vulnerability_type']}")
    print("=" * 60)
    print("\nPOCä»£ç :")
    print(result['poc_code'])
    print("\n" + "=" * 60)
    print("ä½¿ç”¨è¯´æ˜:")
    print(result['explanation'])
    print("=" * 60)
else:
    print(f"ç”Ÿæˆå¤±è´¥: {result['error']}")
```

### JavaScript/TypeScript ç¤ºä¾‹

```javascript
// Fetch API
async function generatePoc(vulnerabilityInfo, targetInfo = null) {
  const response = await fetch('http://127.0.0.1:8000/api/generate-poc', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      vulnerability_info: vulnerabilityInfo,
      target_info: targetInfo
    })
  });

  const result = await response.json();

  if (result.success) {
    console.log('æ¼æ´ç±»å‹:', result.vulnerability_type);
    console.log('POCä»£ç :\n', result.poc_code);
    console.log('ä½¿ç”¨è¯´æ˜:', result.explanation);
  } else {
    console.error('ç”Ÿæˆå¤±è´¥:', result.error);
  }

  return result;
}

// ä½¿ç”¨ç¤ºä¾‹
generatePoc(
  "ç›®æ ‡ç½‘ç«™å­˜åœ¨XSSæ¼æ´ï¼Œä½äºæœç´¢æ¡†å‚æ•°q",
  "http://example.com/search?q="
);
```

### cURL ç¤ºä¾‹

```bash
curl -X POST "http://127.0.0.1:8000/api/generate-poc" \
  -H "Content-Type: application/json" \
  -d '{
    "vulnerability_info": "ç›®æ ‡ç½‘ç«™å­˜åœ¨SQLæ³¨å…¥æ¼æ´ï¼Œä½äºç™»å½•é¡µé¢çš„usernameå‚æ•°",
    "target_info": "MySQLæ•°æ®åº“"
  }'
```

---

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

#### 1. æ·»åŠ æ–°çš„æ•°æ®æ¨¡å‹

ç¼–è¾‘ `models/schemas.py`:

```python
class NewRequest(BaseModel):
    """æ–°è¯·æ±‚æ¨¡å‹"""
    field1: str
    field2: Optional[int] = None
```

#### 2. åˆ›å»ºæ–°æœåŠ¡

åœ¨ `services/` ç›®å½•åˆ›å»ºæ–°æ–‡ä»¶:

```python
class NewService:
    async def process(self, data):
        # ä¸šåŠ¡é€»è¾‘
        pass
```

#### 3. æ·»åŠ æ–°è·¯ç”±

ç¼–è¾‘ `api/routes.py`:

```python
@router.post("/new-endpoint")
async def new_endpoint(request: NewRequest):
    # è°ƒç”¨æœåŠ¡
    result = await new_service.process(request)
    return result
```

### è¿è¡Œæµ‹è¯•

```bash
# å®‰è£…æµ‹è¯•ä¾èµ–
pip install pytest pytest-asyncio httpx

# åˆ›å»ºæµ‹è¯•æ–‡ä»¶ tests/test_api.py
# è¿è¡Œæµ‹è¯•
pytest tests/ -v
```

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ **Black** æ ¼å¼åŒ–ä»£ç 
- ä½¿ç”¨ **flake8** æ£€æŸ¥ä»£ç è´¨é‡
- ä½¿ç”¨ **mypy** è¿›è¡Œç±»å‹æ£€æŸ¥

```bash
pip install black flake8 mypy
black .
flake8 .
mypy .
```

---

## å¸¸è§é—®é¢˜

### Q1: APIè°ƒç”¨å¤±è´¥ï¼Œæç¤ºè®¤è¯é”™è¯¯

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. APIå¯†é’¥æ˜¯å¦æ­£ç¡®é…ç½®åœ¨ `config.py`
2. APIæœåŠ¡å•†æ˜¯å¦æ”¯æŒæ‰€é€‰æ¨¡å‹
3. æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œä»£ç†è®¾ç½®
4. æŸ¥çœ‹ `api_server.log` äº†è§£è¯¦ç»†é”™è¯¯

### Q2: ç”Ÿæˆçš„POCä»£ç ä¸å®Œæ•´

**A**: å¯èƒ½çš„åŸå› ï¼š
1. `LLM_MAX_TOKENS` è®¾ç½®è¿‡å°ï¼Œå»ºè®®è®¾ç½®ä¸º `2000` æˆ–æ›´é«˜
2. æ¨¡å‹èƒ½åŠ›é™åˆ¶ï¼Œå»ºè®®ä½¿ç”¨æ›´å¼ºå¤§çš„æ¨¡å‹ï¼ˆå¦‚GPT-4ï¼‰
3. æ¼æ´ä¿¡æ¯æè¿°ä¸å¤Ÿæ¸…æ™°ï¼Œè¯·æä¾›æ›´è¯¦ç»†çš„ä¿¡æ¯

### Q3: å¦‚ä½•ä¿®æ”¹æœåŠ¡å™¨åœ°å€å’Œç«¯å£ï¼Ÿ

**A**: ç¼–è¾‘ `config.py`:

```python
API_HOST: str = "0.0.0.0"  # ç›‘å¬æ‰€æœ‰æ¥å£
API_PORT: int = 9000       # ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£
```

### Q4: æ”¯æŒå“ªäº›å¤§æ¨¡å‹ï¼Ÿ

**A**: æ”¯æŒæ‰€æœ‰å…¼å®¹ OpenAI API æ ¼å¼çš„æœåŠ¡ï¼š
- OpenAI: GPT-4, GPT-3.5
- ç¡…åŸºæµåŠ¨ã€é€šä¹‰åƒé—®ã€æ–‡å¿ƒä¸€è¨€ç­‰å›½å†…æœåŠ¡
- Ollamaã€LM Studioç­‰æœ¬åœ°éƒ¨ç½²æœåŠ¡

åªéœ€ä¿®æ”¹ `LLM_API_BASE` å’Œ `LLM_MODEL` å³å¯ã€‚

### Q5: å¦‚ä½•ä¿æŠ¤APIå®‰å…¨ï¼Ÿ

**A**: å»ºè®®æ·»åŠ ä»¥ä¸‹å®‰å…¨æªæ–½ï¼š
1. **æ·»åŠ èº«ä»½éªŒè¯**: ä½¿ç”¨JWTæˆ–API Key
2. **é€Ÿç‡é™åˆ¶**: ä½¿ç”¨ `slowapi` é™åˆ¶è¯·æ±‚é¢‘ç‡
3. **CORSé…ç½®**: åœ¨ `main.py` ä¸­è®¾ç½®å…·ä½“å…è®¸çš„åŸŸå
4. **HTTPS**: ä½¿ç”¨åå‘ä»£ç†ï¼ˆNginxï¼‰é…ç½®SSLè¯ä¹¦

---

## å®‰å…¨å»ºè®®

### å¼€å‘ç¯å¢ƒ
- âœ… ä½¿ç”¨æµ‹è¯•æ•°æ®å’Œè™šæ‹Ÿç¯å¢ƒ
- âœ… ä¸è¦åœ¨å…¬ç½‘æš´éœ²å¼€å‘æœåŠ¡å™¨
- âœ… å®šæœŸæ›´æ–°ä¾èµ–åŒ…

### ç”Ÿäº§ç¯å¢ƒ
- âœ… é…ç½®é˜²ç«å¢™å’Œè®¿é—®æ§åˆ¶
- âœ… ä½¿ç”¨HTTPSåŠ å¯†ä¼ è¾“
- âœ… å®æ–½ç”¨æˆ·è®¤è¯å’Œæˆæƒ
- âœ… æ·»åŠ è¯·æ±‚é¢‘ç‡é™åˆ¶
- âœ… è®°å½•è¯¦ç»†çš„å®¡è®¡æ—¥å¿—
- âœ… å®šæœŸå¤‡ä»½å’Œå®‰å…¨å®¡è®¡

### APIå¯†é’¥ç®¡ç†
- âœ… ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†æœåŠ¡
- âŒ ä¸è¦å°†å¯†é’¥ç¡¬ç¼–ç åœ¨ä»£ç ä¸­
- âŒ ä¸è¦å°† `.env` æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
- âœ… å®šæœŸè½®æ¢APIå¯†é’¥

---

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

### æäº¤Issue
- è¯¦ç»†æè¿°é—®é¢˜æˆ–å»ºè®®
- æä¾›å¤ç°æ­¥éª¤å’Œç¯å¢ƒä¿¡æ¯
- é™„ä¸Šç›¸å…³æ—¥å¿—å’Œæˆªå›¾

### æäº¤PR
1. Forkæœ¬é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯Pull Request

---

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å®‰å…¨ç ”ç©¶å’Œæ•™è‚²ç”¨é€”ã€‚ä½¿ç”¨è€…éœ€éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ã€‚

**ç¦æ­¢ç”¨äºï¼š**
- æœªç»æˆæƒçš„å®‰å…¨æµ‹è¯•
- æ¶æ„æ”»å‡»å’Œç ´å
- å…¶ä»–éæ³•ç”¨é€”

---

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤Issueæˆ–è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚

---

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-01-01)
- ğŸ‰ é¦–æ¬¡å‘å¸ƒ
- âœ¨ æ”¯æŒåŸºäºå¤§æ¨¡å‹çš„POCç”Ÿæˆ
- âœ¨ æ”¯æŒå¤šç§Webæ¼æ´ç±»å‹
- âœ¨ å®Œæ•´çš„APIæ–‡æ¡£
- âœ¨ è¯¦ç»†çš„æ—¥å¿—è®°å½•

---

**âš ï¸ æœ€åæé†’ï¼šæœ¬å·¥å…·ä»…ç”¨äºæˆæƒçš„å®‰å…¨æµ‹è¯•å’Œç ”ç©¶ç›®çš„ï¼Œä½¿ç”¨è€…éœ€å¯¹å…¶è¡Œä¸ºè´Ÿè´£ï¼**